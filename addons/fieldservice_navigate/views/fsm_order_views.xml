<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="fsm_order_form_navigate" model="ir.ui.view">
        <field name="name">fsm.order.form.navigate</field>
        <field name="model">fsm.order</field>
        <field name="inherit_id" ref="fieldservice.fsm_order_form"/>
        <field name="arch" type="xml">
            <!-- Add Navigate button in the button box -->
            <xpath expr="//div[@name='button_box']" position="inside">
                <button 
                    name="action_navigate_to_location" 
                    type="object" 
                    class="oe_stat_button" 
                    icon="fa-map-marker"
                    string="Navigate"
                    help="Open Google Maps navigation to this location">
                </button>
            </xpath>
            
            <!-- Add location details below location_id field -->
            <xpath expr="//field[@name='location_id']" position="after">
                <div class="o_address_format" style="padding-left: 0px;">
                    <div style="margin-bottom: 4px;">
                        <field name="street" readonly="1" class="o_form_field_text" placeholder="Street..." invisible="not street"/>
                    </div>
                    <div style="margin-bottom: 4px;">
                        <field name="street2" readonly="1" class="o_form_field_text" placeholder="Street 2..." invisible="not street2"/>
                    </div>
                    <div style="margin-bottom: 4px;">
                        <field name="city" readonly="1" class="o_form_field_text" placeholder="City" invisible="not city"/>
                        <field name="state_name" readonly="1" class="o_form_field_text" invisible="not state_name"/>
                        <field name="zip" readonly="1" class="o_form_field_text" placeholder="ZIP" invisible="not zip"/>
                    </div>
                    <div style="margin-bottom: 4px;">
                        <field name="country_name" readonly="1" class="o_form_field_text" invisible="not country_name"/>
                    </div>
                    <div style="margin-top: 8px;">
                        <span invisible="not phone">
                            <i class="fa fa-phone" style="margin-right: 4px;"/> 
                            <field name="phone" readonly="1" widget="phone" class="o_form_field_phone" invisible="not phone"/>
                        </span>
                    </div>
                </div>
            </xpath>
        </field>
    </record>
</odoo>
